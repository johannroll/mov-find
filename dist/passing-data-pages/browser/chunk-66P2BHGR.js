import{a as st}from"./chunk-WOUXU755.js";import{C as rt,m as et}from"./chunk-D6KMQEVJ.js";import{ca as it,ea as ot,ga as nt,ha as lt,i as tt,ia as ct}from"./chunk-6NTV54WP.js";import"./chunk-JGYM447R.js";import{A as V,Ab as q,Bb as d,Cb as m,D as z,Db as O,Dc as Q,Eb as v,Ga as L,Hb as f,Jb as s,Mb as J,Sb as P,Xa as w,Ya as b,Z as x,Zb as Z,_ as U,a as F,aa as C,b as K,ea as j,fa as $,ga as R,ha as g,ia as h,ib as A,la as Y,pa as B,q as I,qb as y,sb as M,u as _,w as N,xb as S,yb as G,za as T,zb as X}from"./chunk-GXMJTGBT.js";function wt(t,e,i,n){let o=window&&!!window.document&&window.document.documentElement,r=o&&e?window:i;if(t&&(r=t&&o&&typeof t=="string"?vt(t,i.nativeElement,n):t,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function vt(t,e,i){return(i?window.document:e).querySelector(t)}function D(t){return t&&!t.firstChange}function St(){return typeof window<"u"}var _t={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},xt={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},H=class{constructor(e=!0){this.vertical=e,this.propsMap=e?_t:xt}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function Ct(t,e,i){return!!(t&&e||!i&&e)}function Tt({windowElement:t,axis:e}){return bt({axis:e,isWindow:yt(t)},t)}function bt(t,e){let i=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return K(F({},t),{container:i})}function yt(t){return["Window","global"].some(i=>Object.prototype.toString.call(t).includes(i))}function W(t,e){return t?e.document.documentElement:null}function at(t,e){let i=Pt(e);return e.isWindow?Mt(i,t,e):Ot(i,t,e)}function Mt(t,e,i){let{axis:n,container:o,isWindow:r}=i,{offsetHeightKey:l,clientHeightKey:a}=dt(n),p=t+mt(W(r,o),n,r),c=pt(e.nativeElement,r,l,a),u=Dt(e.nativeElement,n,r)+c;return{height:t,scrolled:p,totalToScroll:u,isWindow:r}}function Ot(t,e,i){let{axis:n,container:o}=i,r=o[n.scrollTopKey()],l=o[n.scrollHeightKey()];return{height:t,scrolled:r,totalToScroll:l,isWindow:!1}}function dt(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function Pt({container:t,isWindow:e,axis:i}){let{offsetHeightKey:n,clientHeightKey:o}=dt(i);return pt(t,e,n,o)}function pt(t,e,i,n){if(isNaN(t[i])){let o=W(e,t);return o?o[n]:0}else return t[i]}function Dt(t,e,i){let n=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[n]+mt(t,e,i)}function mt(t,e,i){let n=e.pageYOffsetKey(),o=e.scrollTopKey(),r=e.offsetTopKey();return isNaN(window.pageYOffset)?W(i,t)[o]:t.ownerDocument?t.ownerDocument.defaultView[n]:t[r]}function Ht(t,e={down:0,up:0},i){let n,o;if(t.totalToScroll<=0)return!1;let r=t.isWindow?t.scrolled:t.height+t.scrolled;if(i)n=(t.totalToScroll-r)/t.totalToScroll,o=(e?.down?e.down:0)/10;else{let a=t.scrolled+(t.totalToScroll-r);n=t.scrolled/a,o=(e?.up?e.up:0)/10}return n<=o}function kt(t,e){return t<e.scrolled}function Et(t,e,i){let n=kt(t,e);return{fire:Ht(e,i,n),scrollDown:n}}var k=class{constructor(e){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,e)}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,i){this.updateScrollPosition(e),this.updateTotalToScroll(i)}updateTriggeredFlag(e,i){i?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,i){return i?this.triggered.down===e:this.triggered.up===e}};function Wt(t){let{scrollContainer:e,scrollWindow:i,element:n,fromRoot:o}=t,r=Tt({axis:new H(!t.horizontal),windowElement:wt(e,i,n,o)}),l=new k({totalToScroll:at(n,r).totalToScroll}),a={container:r.container,throttle:t.throttle},p={up:t.upDistance,down:t.downDistance};return Ft(a).pipe(N(()=>I(at(n,r))),_(c=>Kt(l.lastScrollPosition,c,p)),x(({stats:c})=>l.updateScroll(c.scrolled,c.totalToScroll)),z(({fire:c,scrollDown:u,stats:{totalToScroll:gt}})=>Ct(t.alwaysCallback,c,l.isTriggeredScroll(gt,u))),x(({scrollDown:c,stats:{totalToScroll:u}})=>{l.updateTriggeredFlag(u,c)}),_(It))}function Ft(t){let e=V(t.container,"scroll");return t.throttle&&(e=e.pipe(U(t.throttle,void 0,{leading:!0,trailing:!0}))),e}function Kt(t,e,i){let{scrollDown:n,fire:o}=Et(t,e,i);return{scrollDown:n,fire:o,stats:e}}var E={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function It(t){let{scrollDown:e,stats:{scrolled:i}}=t;return{type:e?E.DOWN:E.UP,payload:{currentScrollPosition:i}}}var ft=(()=>{let e=class e{constructor(n,o){this.element=n,this.zone=o,this.scrolled=new C,this.scrolledUp=new C,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:n,infiniteScrollDisabled:o,infiniteScrollDistance:r}){let l=D(n),a=D(o),p=D(r),c=!a&&!this.infiniteScrollDisabled||a&&!o.currentValue||p;(l||a||p)&&(this.destroyScroller(),c&&this.setup())}setup(){St()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=Wt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(n=>this.handleOnScroll(n))})}handleOnScroll({type:n,payload:o}){let r=n===E.DOWN?this.scrolled:this.scrolledUp;Nt(r)&&this.zone.run(()=>r.emit(o))}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)(b(Y),b(A))},e.\u0275dir=R({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[L]});let t=e;return t})();function Nt(t){return t.observed??t.observers.length>0}var ut=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=$({type:e}),e.\u0275inj=B({});let t=e;return t})();function zt(t,e){if(t&1&&O(0,"img",6),t&2){let i=s().$implicit;M("ngSrc",i.poster_path!==null?"https://image.tmdb.org/t/p/w500/"+i.poster_path:"https://fakeimg.pl/600x750?text=No+image")}}function Ut(t,e){if(t&1){let i=v();d(0,"img",7),f("click",function(){g(i);let o=s().$implicit,r=s();return h(r.movieService.movieDetailId$.next(+o.id))}),m()}if(t&2){let i=s().$implicit;M("ngSrc",i.poster_path!==null?"https://image.tmdb.org/t/p/w500/"+i.poster_path:"https://fakeimg.pl/600x750?text=No+image")}}function jt(t,e){if(t&1){let i=v();d(0,"button",8),f("click",function(){g(i);let o=s().$implicit,r=s();return h(r.watchlistService.remove$.next(o.id))}),d(1,"mat-icon"),P(2,"favorite"),m()()}}function $t(t,e){if(t&1){let i=v();d(0,"button",9),f("click",function(){g(i);let o=s().$implicit,r=s();return h(r.watchlistService.add$.next(o))}),d(1,"mat-icon"),P(2,"favorite"),m()()}}function Rt(t,e){if(t&1){let i=v();d(0,"div",3),f("click",function(){g(i);let o=s();return h(o.movieService.scrollState.set({scrollTo:o.scrollPosition()}))}),y(1,zt,1,1,"img",4)(2,Ut,1,1)(3,jt,3,0,"button",5)(4,$t,3,0),m()}if(t&2){let i=e.$implicit,n=e.$index,o=s();J("routerLink","/detail/",i.id,""),w(),S(1,n<2?1:2),w(2),S(3,o.watchlistService.isMovieOnWatchlist(i.id)?3:4)}}function Yt(t,e){t&1&&O(0,"div",10)}var ge=(()=>{let e=class e{constructor(){this.movieService=T(rt),this.watchlistService=T(nt)}ngAfterViewInit(){window.scrollTo(0,this.movieService.scroll())}scrollPosition(){return window.scrollY}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=j({type:e,selectors:[["app-home"]],standalone:!0,features:[Z],decls:5,vars:1,consts:[[1,"container"],["infiniteScroll","",1,"movie-list",3,"scrolled"],["class","loader"],[1,"card",3,"routerLink","click"],["priority","","class","image","width","300","height","500",3,"ngSrc"],["mat-mini-fab","","color","warn","class","btn-favorite-home","stopPropagation",""],["priority","","width","300","height","500",1,"image",3,"ngSrc"],["width","300","height","500",1,"image",3,"ngSrc","click"],["mat-mini-fab","","color","warn","stopPropagation","",1,"btn-favorite-home",3,"click"],["mat-mini-fab","","color","none","stopPropagation","",1,"btn-favorite-home",3,"click"],[1,"loader"],["class","card",3,"routerLink"]],template:function(o,r){o&1&&(d(0,"div",0)(1,"div",1),f("scrolled",function(){return r.movieService.state().genre?r.movieService.paginationGenre$.next(r.movieService.lastKnownMovie()):r.movieService.pagination$.next(r.movieService.lastKnownMovie())}),X(2,Rt,5,3,"div",11,G),m(),y(4,Yt,1,0,"div",2),m()),o&2&&(w(2),q(r.movieService.movies()),w(2),S(4,r.movieService.loading()?4:-1))},dependencies:[tt,et,Q,ut,ft,ct,lt,ot,it,st],styles:[".card[_ngcontent-%COMP%]{position:relative;width:320px;display:flex;margin:1rem;flex-direction:column;align-items:center;background:#3a3a3a;box-shadow:0 3px 15px 3px #0006;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.03);z-index:0}.image[_ngcontent-%COMP%]{width:320px;object-fit:cover}.title[_ngcontent-%COMP%]{width:100%;background:#000;text-align:center}.movie-list[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:3rem;display:grid;grid-template-columns:repeat(3,1fr);padding:5px;border:none;place-items:center}@media (max-width: 1050px){.movie-list[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 720px){.movie-list[_ngcontent-%COMP%]{grid-template-columns:250px 250px}.card[_ngcontent-%COMP%]{width:240px;height:350px;margin:1rem 0rem}.image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}}@media (max-width: 530px){.movie-list[_ngcontent-%COMP%]{grid-template-columns:200px 200px}.card[_ngcontent-%COMP%]{width:180px;height:260px;margin:1rem 0rem}.image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}}@media (max-width: 425px){.movie-list[_ngcontent-%COMP%]{grid-template-columns:180px 180px}.card[_ngcontent-%COMP%]{width:165px;height:235px;margin:1rem 0rem}.image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}}.movie-list-item[_ngcontent-%COMP%]{text-wrap:no-wrap;margin:3px 0;text-align:center;padding:6px;border-radius:5px;background-color:salmon;color:azure;text-decoration:none}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;margin-top:4rem;background:#3a3a3a;padding:2rem;border-radius:5px}.form-heading[_ngcontent-%COMP%]{margin:0rem 0rem 2rem;text-align:center}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;border:none;outline:none;padding:10px 5px;border-radius:5px}.btn-back[_ngcontent-%COMP%]{margin:1rem;padding:10px;border-radius:5px;border:none;color:azure;background:teal;transition:all .2s ease}.btn-back[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.btn-favorite-home[_ngcontent-%COMP%]{position:absolute!important;bottom:5px;right:0;align-self:center;margin:0rem 5px;border:none;z-index:10}"]});let t=e;return t})();export{ge as default};
